var myApp=angular.module("myApp",["ui.router","timelineControllers"]);myApp.config(function(e,t){t.otherwise("/home"),e.state("tab",{url:"/tab",templateUrl:"partials/tab.html",controller:"tabcontrol"}).state("home",{url:"/home",templateUrl:"partials/chap0_main.html"}).state("intro",{url:"/intro",templateUrl:"partials/chap1_intro.html"}).state("tab.timeline",{url:"/timeline",templateUrl:"partials/chap1_timeline.html",controller:"timelineController"}).state("tab.chap2",{url:"/chap2",templateUrl:"partials/chap2_scroll.html",controller:"Chap2Controller"}).state("tab.chap3",{url:"/chap3",templateUrl:"partials/chap3_scroll.html",controller:"Chap3Controller"}).state("tab.details",{url:"/list/:itemId",templateUrl:"partials/details.html",controller:"DetailsController"})});var timelineControllers=angular.module("timelineControllers",["ui.bootstrap.dialog"]).filter("trustUrl",function(e){return function(t){return e.trustAsResourceUrl(t)}});timelineControllers.controller("timelineController",["$scope","$http",function(e,t){t.get("source/timeline.json").success(function(t){e.events=t,e.letterLimit=80,document.body.style.width="3500px",$("#texture").css("width","3500px");$.grep(t,function(e){return 1===e.id});$("audio").css("border","solid"),e.selectItem=function(t){for(var l=0;l<e.events.length;l++){var o=e.events[l];o.id==t.id?(o.selected=!o.selected,document.body.style.width="4000px",e.letterLimit=1e3):(o.selected=!1,document.body.style.width="3500px",e.letterLimit=80)}}})}]),timelineControllers.controller("Chap2Controller",["$scope","$http",function(e,t){t.get("source/chap2-scroll.json").success(function(t){e.events=t,e.first=t[0],document.body.style.width="8500px",$("#texture").css("width","8500px");document.getElementById("audio_0");$("#audio_0").bind("load",function(){console.log("Audio Loaded succesfully")}),e.selectItem=function(t){for(var l=0;l<e.events.length;l++){var o=e.events[l];o.id==t.id?(o.selected=!o.selected,document.body.style.width+100,e.letterLimit=1e3):(o.selected=!1,document.body.style.width,e.letterLimit=100)}};var l=document.getElementById("bgm1");l.load(),l.play();for(var o=function(e){var t=document.getElementById("audio_"+e);t.load(),t.play(),console.log(e)},r=0;r<e.events.length;r++)o(r)}),$("#audio_0").on("ended",function(){alert("sdfsgdsg")})}]),timelineControllers.controller("Chap3Controller",["$scope","$http",function(e,t){t.get("source/chap3-scroll.json").success(function(t){e.events=t,document.body.style.width="8500px",$("#texture").css("width","8500px"),e.selectItem=function(t){for(var l=0;l<e.events.length;l++){var o=e.events[l];o.id==t.id?(o.selected=!o.selected,document.body.style.width+100,e.letterLimit=1e3,$("body").addClass("black-bg")):(o.selected=!1,document.body.style.width,e.letterLimit=100,$("body").removeClass("black-bg"))}}})}]),timelineControllers.controller("Ctrl",function(e,t,l){e.open=function(){var e={backdrop:!0,keyboard:!0,controller:"DetailsController",templateUrl:"partials/test.html"},o=l.dialog(e);o.open().then(function(e){0===e?t.alert("Cancel pressed"):1===e&&t.alert("OK pressed")})}}).controller("DialogCtrl",function(e,t){e.close=function(e){t.close(e)}}),timelineControllers.controller("DetailsController",["$scope","$http","$state",function(e,t,l,o){t.get("source/chap2-scroll.json").success(function(t){e.events=t,e.whichItem=l.params.itemId,e.close=function(e){o.close(e)}})}]),timelineControllers.controller("tabcontrol",function(){$(".chap-title").hide(),$("#menu-toggle").click(function(e){e.preventDefault(),$("#wrapper").toggleClass("toggled");var t=$("#sidebar-wrapper").width();$("#sidebar-wrapper");console.log($("#sidebar-wrapper").width()),50>t&&($(".chap-title").show(),$("#sidebar-toggle").removeClass("sidebar-move")),t>50&&($(".chap-title").hide(),$("#sidebar-toggle").addClass("sidebar-move"))})}),function(e){var t={createLine:function(e,t,l,o,r){var n=navigator.userAgent.indexOf("MSIE")>-1;if(e>l){var s=e;e=l,l=s,s=t,t=o,o=s}var i=document.createElement("div"),a=Math.sqrt((e-l)*(e-l)+(t-o)*(t-o));if(i.style.width=a+"px",i.style.borderBottom=r.stroke+"px "+r.style,i.style.borderColor=r.color,i.style.position="absolute",i.style.zIndex=r.zindex,n){i.style.top=o>t?t+"px":o+"px",i.style.left=e+"px";var c=(l-e)/a,d=(o-t)/a;i.style.filter="progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11="+c+", M12="+-1*d+", M21="+d+", M22="+c+")"}else{var u=Math.atan((o-t)/(l-e));i.style.top=t+.5*a*Math.sin(u)+"px",i.style.left=e-.5*a*(1-Math.cos(u))+"px",i.style.transform=i.style.MozTransform=i.style.WebkitTransform=i.style.msTransform=i.style.OTransform="rotate("+u+"rad)"}return i}};e.fn.line=function(l,o,r,n,s,i){return e(this).each(function(){e.isFunction(s)?(callback=s,s=null):callback=i,s=e.extend({},e.fn.line.defaults,s),e(this).append(t.createLine(l,o,r,n,s)).promise().done(function(){e.isFunction(callback)&&callback.call()})})},e.fn.line.defaults={zindex:1e4,color:"#000000",stroke:"1",style:"solid"}}(jQuery);