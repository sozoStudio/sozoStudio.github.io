var myApp=angular.module("myApp",["ui.router","timelineControllers"]);myApp.config(function(t,e){e.otherwise("/home"),t.state("tab",{url:"/tab",templateUrl:"partials/tab.html",controller:"tabcontrol"}).state("home",{url:"/home",templateUrl:"partials/chap0_main.html"}).state("intro",{url:"/intro",templateUrl:"partials/chap1_intro.html"}).state("tab.timeline",{url:"/timeline",templateUrl:"partials/chap1_timeline.html",controller:"timelineController"}).state("tab.chap2",{url:"/chap2",templateUrl:"partials/chap2_scroll.html",controller:"Chap2Controller"}).state("tab.chap3",{url:"/chap3",templateUrl:"partials/chap3_scroll.html",controller:"Chap3Controller"}).state("tab.details",{url:"/list/:itemId",templateUrl:"partials/details.html",controller:"DetailsController"})});var timelineControllers=angular.module("timelineControllers",["angular-carousel"]).filter("trustUrl",function(t){return function(e){return t.trustAsResourceUrl(e)}});timelineControllers.controller("timelineController",["$scope","$http",function(t,e){e.get("source/timeline.json").success(function(e){t.events=e,t.letterLimit=80,document.body.style.width="3500px",$("#texture").css("width","3500px");$.grep(e,function(t){return 1===t.id});$("audio").css("border","solid"),t.selectItem=function(e){for(var l=0;l<t.events.length;l++){var o=t.events[l];o.id==e.id?(o.selected=!o.selected,document.body.style.width="4000px",t.letterLimit=1e3):(o.selected=!1,document.body.style.width="3500px",t.letterLimit=80)}}})}]),timelineControllers.controller("Chap2Controller",["$scope","$http",function(t,e){e.get("source/chap2-scroll.json").success(function(e){t.events=e,t.first=e[0],document.body.style.width="8500px",$("#texture").css("width","8500px");document.getElementById("audio_0");$("#audio_0").bind("load",function(){console.log("Audio Loaded succesfully")}),t.selectItem=function(e){for(var l=0;l<t.events.length;l++){var o=t.events[l];o.id==e.id?(o.selected=!o.selected,document.body.style.width+100,t.letterLimit=1e3):(o.selected=!1,document.body.style.width,t.letterLimit=100)}},$(".narration").on("play",function(){$(".narration").not(this).each(function(t,e){e.pause()})});for(var l=function(t){var e=document.getElementById("audio_"+t);e.load(),e.play(),console.log(t)},o=0;o<t.events.length;o++)l(o)})}]),$("#audio_0").on("ended",function(){alert("bsdfhjksf")}),timelineControllers.controller("Chap3Controller",["$scope","$http",function(t,e){e.get("source/chap3-scroll.json").success(function(e){t.events=e,document.body.style.width="8500px",$("#texture").css("width","8500px"),t.selectItem=function(e){for(var l=0;l<t.events.length;l++){var o=t.events[l];o.id==e.id?(o.selected=!o.selected,document.body.style.width+100,t.letterLimit=1e3,$("body").addClass("black-bg")):(o.selected=!1,document.body.style.width,t.letterLimit=100,$("body").removeClass("black-bg"))}}})}]),timelineControllers.controller("Ctrl",function(t,e,l){t.open=function(){var t={backdrop:!0,keyboard:!0,controller:"DetailsController",templateUrl:"partials/test.html"},o=l.dialog(t);o.open().then(function(t){0===t?e.alert("Cancel pressed"):1===t&&e.alert("OK pressed")})}}).controller("DialogCtrl",function(t,e){t.close=function(t){e.close(t)}}),timelineControllers.controller("DetailsController",["$scope","$http","$state",function(t,e,l,o){e.get("source/chap2-scroll.json").success(function(e){t.events=e,t.whichItem=l.params.itemId,t.close=function(t){o.close(t)}})}]),timelineControllers.controller("tabcontrol",function(){$(".chap-title").hide(),$("#menu-toggle").click(function(t){t.preventDefault(),$("#wrapper").toggleClass("toggled");var e=$("#sidebar-wrapper").width();$("#sidebar-wrapper");console.log($("#sidebar-wrapper").width()),50>e&&$(".chap-title").show(),e>50&&$(".chap-title").hide()})}),function(t){var e={createLine:function(t,e,l,o,r){var n=navigator.userAgent.indexOf("MSIE")>-1;if(t>l){var s=t;t=l,l=s,s=e,e=o,o=s}var i=document.createElement("div"),a=Math.sqrt((t-l)*(t-l)+(e-o)*(e-o));if(i.style.width=a+"px",i.style.borderBottom=r.stroke+"px "+r.style,i.style.borderColor=r.color,i.style.position="absolute",i.style.zIndex=r.zindex,n){i.style.top=o>e?e+"px":o+"px",i.style.left=t+"px";var c=(l-t)/a,d=(o-e)/a;i.style.filter="progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand', M11="+c+", M12="+-1*d+", M21="+d+", M22="+c+")"}else{var u=Math.atan((o-e)/(l-t));i.style.top=e+.5*a*Math.sin(u)+"px",i.style.left=t-.5*a*(1-Math.cos(u))+"px",i.style.transform=i.style.MozTransform=i.style.WebkitTransform=i.style.msTransform=i.style.OTransform="rotate("+u+"rad)"}return i}};t.fn.line=function(l,o,r,n,s,i){return t(this).each(function(){t.isFunction(s)?(callback=s,s=null):callback=i,s=t.extend({},t.fn.line.defaults,s),t(this).append(e.createLine(l,o,r,n,s)).promise().done(function(){t.isFunction(callback)&&callback.call()})})},t.fn.line.defaults={zindex:1e4,color:"#000000",stroke:"1",style:"solid"}}(jQuery);